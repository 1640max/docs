# Иерархия ресурсов Яндекс.Облака

Когда вы получаете доступ к Яндекс.Облаку, вам выделяется отдельное рабочее пространство — _облако_. В нем вы будете создавать _каталоги_.

В каталогах размещаются _ресурсы:_ виртуальные машины, диски и прочее. Каждый каталог принадлежит только одному ресурсу. Вложенные каталоги сейчас не поддерживаются.

{{ resmgr-name }} построен по стандартной ресурсной модели, которая используется в большинстве сервисов Яндекс.Облака. Она представлена на рисунке ниже.

![image](../../_assets/resource-structure.png)

Владелец облака может управлять правами доступа к ресурсам и самому облаку. По умолчанию пользователь вне облака не может получить доступ к ресурсам облака.

Права доступа на ресурсы наследуются. Права на облако распространяются на все ресурсы внутри облака. Права на каталог — на все ресурсы внутри каталога. Подробнее об этом в разделе [{#T}](#access-rights-inheritance).

Некоторые типы ресурсов не создаются в каталогах, поэтому имеют собственную логику проверки прав доступа. Например, при управлении ключами доступа для сервисного аккаунта проверяются права доступа на этот сервисный аккаунт.


## Облако как ресурс Яндекс.Облака {#cloud}

**Облако** — это изолированное пространство, в котором создаются каталоги.

При создании ресурса внутри облака, доступ к ресурсу закрыт для всех, кроме участников и владельцев облака.

### Владелец облака {#owner}

**Владелец облака** — это пользователь, которому назначена роль `{{ roles-cloud-owner }}` на это облако. Пользователь, создавший облако, по умолчанию становится его владельцем. <Либо создатель назначает владельца, нужно уточнение>

Владелец может выполнять любые операции с облаком и ресурсами в нем.

Владелец может выдавать доступ к облаку другим пользователям: назначать им роли и отнимать их. В том числе владелец может назначить других владельцев облака или отнять роль владельца у себя.

У облака должен быть хотя бы один владелец. Единственный владелец облака не сможет отнять эту роль у себя.

### Участник облака {#member}

**Участник облака** — это пользователь, которому назначена роль `{{ roles-cloud-member }}` на это облако.

Роль участника облака необходима для выполнения операций с ресурсом в облаке. Исключение — ресурсы с [публичным доступом](#public-access).

Сама роль `{{ roles-cloud-member }}` не дает прав на выполнение каких-либо операций с ресурсами. Эта роль используется в сочетании с другими ролями.

> Например, если участнику облака назначена роль `{{ roles-editor }}` на один из каталогов внутри облака, он может создавать ресурсы в этом каталоге. Если у пользователя отнять роль участника облака, он не сможет больше выполнять никаких операций.

{% note info %}

Роль `{{ roles-cloud-member }}` не нужна для владельцев облака и сервисных аккаунтов.

{% endnote %}

### Публичный доступ к облаку {#public-access}

Облако и любой ресурс в нем можно сделать публичным, [назначив роль системной группе](../../iam/operations/roles/grant.md#access-to-all). Для доступа к публичному ресурсу не обязательно быть участником облака, необходимо только знать идентификатор ресурса. Подробнее о [системных группах](../../iam/concepts/access-control/system-group.md).

## Каталог как ресурс Яндекс.Облака {#folder}

**Каталог** — это пространство, в котором создаются и группируются ресурсы Яндекс.Облака.

Задача каталогов — упростить управление ресурсами. Вы можете группировать ресурсы в каталоги по типу, по проекту, по отделу, который работает с этими ресурсами, или по любому другому признаку.

> Допустим, в вашей организации есть сотрудники, которые работают только с виртуальными машинами. Вы можете создать каталог, в котором будут только виртуальные машины, и предоставить сотрудникам доступ к этому каталогу.

Вы можете посмотреть содержимое каталога в консоли управления. Чтобы узнать, к какому каталогу относится ресурс, воспользуйтесь

- _В API:_ методом `Get` для этого ресурса;
- _В CLI:_ командой `get`.


## Наследование прав доступа {#access-rights-inheritance}

Когда пользователь выполняет какую-либо операцию с ресурсом, сервис _Yandex Identity and Access Management_ (IAM) проверяет наличие необходимых прав доступа у пользователя на этот ресурс.

Права доступа на ресурсы внутри облака наследуются согласно иерархии Облако → Каталог → Ресурс.

> Например, в облаке `mycloud` в каталоге `robots` созданы два сервисных аккаунта `Alice` и `Bob`.
>
> Если пользователю на облако `mycloud` назначены роли `{{ roles-cloud-member }}` и `{{ roles-viewer }}`, то он сможет посмотреть содержимое обоих каталогов.
>
> Если пользователю назначить роль `{{ roles-editor }}` по отношению к `Alice`, он сможет управлять `Alice`, но не сможет управлять `Bob`.
>
> Если пользователю назначить роль `{{ roles-admin }}` в каталоге `robots`, он сможет управлять каталогом и всеми ресурсами в нем.

Для некоторых ресурсов нельзя назначать роли: для них права наследуются от каталога.

{% note info %}

Например на данный момент нельзя назначить роль на виртуальную машину. При попытке получить информацию о виртуальной машине, IAM проверит, что у пользователя есть необходимые права доступа на каталог, которому она принадлежит. Если для каталога права доступа не заданы, то IAM проверит права доступа в этом облаке.

{% endnote %}

#### См. также {#see-also}

- [{#T}](../operations/cloud/set-access-bindings.md)
- [{#T}](../operations/folder/create.md)
- [{#T}](../operations/folder/set-access-bindings.md)
